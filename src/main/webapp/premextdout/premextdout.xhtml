<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:p="http://primefaces.org/ui">
	
	<ui:composition template="/template/defaultTemplate.xhtml">
		
		<ui:define name="header">
			<h:outputStylesheet name="css/custom-forms.css" />
			<h:outputStylesheet name="css/custom-forms-uvigo.css" />
			<h:outputScript name="js/es6-promise.auto.min.js"/>
			<h:outputScript name="js/jspdf.umd.min.js"/>
			<h:outputScript name="js/html2canvas.min.js"/>
			<h:outputScript name="js/html2pdf.bundle.min.js" />
			<h:outputScript name="js/printjs.min.js" />
			<h:outputScript name="js/crypto-js.min.js" />
			<h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
		</ui:define>
		
		<ui:define name="formdata">
			
			<h:form id="NewRegistryForm" prependId="false">
				
				<h:panelGroup rendered="#{!premExtDoutController.candidate}">
					<div style="margin: 0 auto;width: 70%;">
						<h2 style="font-size: 1.3em">#{i18n.notcandidate}</h2>
					</div>
				</h:panelGroup>
					
				<h:panelGroup rendered="#{premExtDoutController.candidate}">
				<ui:include src="/base/datosBasicosSolicitudUvigo.xhtml">
					<ui:param name="datosSolicitud" value="#{premExtDoutController}" />
				</ui:include>
	
				<ui:include src="/base/datosNotificacionUvigo.xhtml">
					<ui:param name="datosSolicitud" value="#{premExtDoutController}" />
				</ui:include>

					<script type="text/javascript">
						var i18n_missing_text_check = '#{i18n.missing_text_check}';
                        var i18n_missing_text = '#{i18n.missing_text}';
                        var i18n_missing_check = '#{i18n.missing_check}';
                        var i18n_missing_address = '#{i18n.missing_address}';
                        var i18n_missing_province = '#{i18n.missing_province}';
                        var i18n_missing_town = '#{i18n.missing_town}';
                        var i18n_missing_files = '#{i18n.missing_files}';
                        var i18n_select_province = '#{i18n.select_province}';
                        var i18n_select_town = '#{i18n.select_town}';
                        var i18n_missing_issue = '#{i18n.missing_issue}';
                        var i18n_missing_expose = '#{i18n.missing_expose}';
                        var i18n_missing_ask = '#{i18n.missing_ask}';
                        var i18n_wrong_email = '#{i18n.wrong_email}';
                        var singactive = '#{premExtDoutController.signActive}';
					</script>
				<!-- Inicio datos especÃ­ficos-->
				<div class="box-100column">
					<div class="boxes-full" style="width: calc(100% - 25px);">
						<div class="box-title">
							<h2 style="font-size: 1.3em">#{i18n.sol_dynamic_data}</h2>
						</div>
						
					    <h:panelGroup>	
					    
							<div class="box-100column">
								<fieldset>
									<p:outputLabel class="box-texttitle" for="idambito" value="#{i18n.idambito}">: </p:outputLabel>
									<h:selectOneMenu class="box-selectform" id="idambito"
										value="#{premExtDoutController.model.registrytypedata.idambito}"
										converter="javax.faces.Integer" required="false" disabled="true" style="min-width:400px;opacity: 0.65">
										<f:selectItems value="#{premExtDoutController.ambitos.entrySet()}"
											var="entry" itemLabel="#{entry.value}" itemValue="#{entry.key}" />
									</h:selectOneMenu>
								</fieldset>
							</div>
							<div class="box-100column">
								<fieldset>
									<p:outputLabel class="box-texttitle" for="idcneai" value="#{i18n.idcneai}">: </p:outputLabel>
									<h:selectOneMenu class="box-selectform" id="idcneai"
										value="#{premExtDoutController.model.registrytypedata.idcneai}"
										converter="javax.faces.Integer" required="false" disabled="true" style="min-width:400px;opacity: 0.65">
										<f:selectItems value="#{premExtDoutController.cneai.entrySet()}"
											var="entry" itemLabel="#{entry.value}" itemValue="#{entry.key}" />
									</h:selectOneMenu>
								</fieldset>
							</div>
							<div class="box-100column">
								<fieldset>
									<p:outputLabel class="box-texttitle" for="fechadeftesis"
										value="#{i18n.fechadeftesis}">: </p:outputLabel>
									<div>									
										<p:inputText type="text" class="box-textform" id="fechadeftesis"
											value="#{premExtDoutController.model.registrytypedata.fechadeftesis}"
											required="false" disabled="true" style="width:120px;margin-left: 10px;opacity: 0.65" />								
									</div>
								</fieldset>
							</div>
							<div class="box-100column">
								<fieldset>
									<p:outputLabel for="titulotesis" value="#{i18n.titulotesis}"
										class="box-texttitle">: </p:outputLabel>									
									<p:inputTextarea id="titulotesis" class="box-textform" rows="10" cols="120" value="#{premExtDoutController.model.registrytypedata.titulotesis}" 
											style="min-width:467px;margin-left: 10px;opacity: 0.65" required="false" disabled="true"/>
								</fieldset>
							</div>
				
				
							<div class="box-100column">
								<fieldset>
									<p:outputLabel for="dirigida" value="#{i18n.dirigida}"
										class="box-texttitle">: </p:outputLabel>
									<p:inputText type="text" class="box-textform" id="dirigida"
										value="#{premExtDoutController.model.registrytypedata.dirigida}"
										required="false" disabled="true" style="min-width:467px;margin-left: 10px;opacity: 0.65" />
								</fieldset>
							</div>
							
							<div class="boxes-full" style="width: calc(100% - 13px);margin-left: 10px">
								<div class="box-title">
									<h2 style="font-size: 1.3em">
									<div id="wrapper" style="width: 700px">
										<div style="float:left">
											#{i18n.titleContribucionDialog}
										</div>  
										<div style="float:right;font-size: 0.7em"> 
											<p:commandButton update="dlgContrib:contribData dlgContrib:contribButtons"
												oncomplete="PF('contribucionDialog').show()"
												value="#{i18n.anadir}" immediate="true"
												action="#{premExtDoutController.addContrib}">
											</p:commandButton>
										</div>
									</div>
									</h2>
								</div>
							    <h:panelGroup id="panelDatatableContrib">
									<div class="box-100column">
										<p:dataTable id="contribucionsTable" var="contribucion"
											value="#{premExtDoutController.contribuciones}" emptyMessage="" rendered="#{!empty premExtDoutController.contribuciones}">
			    
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.contrib_titulo}" />							
												</f:facet>
												<h:outputText value="#{contribucion.titulo.length() gt 20 ? contribucion.titulo.substring(0,17).concat('...') : contribucion.titulo}" />
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.contrib_publicacion}" />
												</f:facet>
												<h:outputText value="#{contribucion.publicacion.length() gt 20 ? contribucion.publicacion.substring(0,17).concat('...') : contribucion.publicacion}" />
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.contrib_descricion}" />
												</f:facet>
												<h:outputText value="#{contribucion.descricion.length() gt 20 ? contribucion.descricion.substring(0,17).concat('...') : contribucion.descricion}" />
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.contrib_coautores}" />
												</f:facet>
												<h:outputText value="#{contribucion.coautores.length() gt 20 ? contribucion.coautores.substring(0,17).concat('...') : contribucion.coautores}" />
											</p:column>
						
											<p:column style="width:40px">
																
												<p:commandLink update="dlgContrib:contribData dlgContrib:contribButtons"
													oncomplete="PF('contribucionDialog').show()"
													immediate="true">
													<f:setPropertyActionListener value="#{contribucion}" target="#{premExtDoutController.selectedContribucion}" />											
														<h:graphicImage alt="ko" library="images" name="icons/magnifying_glass16.png" style="margin-bottom:-4px;margin-left:4px;" />						
												</p:commandLink>
													
												<p:commandLink update="panelDatatableContrib contribucionsTable" immediate="true" >
													<f:setPropertyActionListener value="#{contribucion}" target="#{premExtDoutController.deletedContribucion}" />											
													<h:graphicImage alt="ko" library="images" name="icons/delete16.png"	style="margin-bottom:-4px;margin-left:4px;" />						
												</p:commandLink>
						
											</p:column>			
										</p:dataTable>									
									</div>
									
								</h:panelGroup>	
							</div>
				
							<div class="box-100column">
								<fieldset>
									<p:outputLabel class="form-check-label"
										value="#{i18n.mencionintbool}" style="margin-left:10px">
									</p:outputLabel>
									<p:selectBooleanCheckbox style="padding-left: 10px;"
										value="#{premExtDoutController.model.registrytypedata.mencionintbool}"
										type="checkbox" class="form-check-input" id="mencionintbool"
										required="false" disabled="false">
											<f:ajax render="panelEstanciasTableAll" />
										</p:selectBooleanCheckbox>
								</fieldset>
							</div>
							<h:panelGroup id="panelMencionText" rendered="#{premExtDoutController.model.registrytypedata.mencionintbool}">
							<div class="box-100column">
								<fieldset>
									<p:outputLabel for="menciontext" value="#{i18n.menciontext}" class="box-texttitle">: </p:outputLabel>									
									<p:inputTextarea id="menciontext" class="box-textform" rows="10" cols="120" value="#{premExtDoutController.model.registrytypedata.menciontext}" 
											style="min-width:467px;margin-left: 10px;opacity: 0.65" required="false" disabled="true"/>
								</fieldset>
										
								
							</div>
								</h:panelGroup>
							<h:panelGroup id="panelEstanciasTableAll">						
								<h:panelGroup id="panelEstanciasTable" rendered="#{premExtDoutController.model.registrytypedata.mencionintbool}">
								<div class="boxes-full" style="width: calc(100% - 13px);margin-left: 10px">							
									<div class="box-title">
										<h2 style="font-size: 1.3em">
										<div id="wrapper" style="width: 700px">
											<div style="float:left">
												#{i18n.titleEstanciaDatatable}
											</div>
											<div style="float:right;font-size: 0.7em">
												<p:commandButton update="dlgEstancia:estanciaData dlgEstancia:estanciaButtons"
													oncomplete="PF('estanciaDialog').show()"
													value="#{i18n.anadir}" immediate="true"
													action="#{premExtDoutController.addEstancia}">
												</p:commandButton>
											</div>
										</div>
										</h2>
									</div>
									<div class="box-100column">
										<p:dataTable id="estanciasTable" var="estancia"
											value="#{premExtDoutController.estancias}" emptyMessage="" rendered="#{!empty premExtDoutController.estancias}" >
						    
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.estancia_fechaini}" />							
												</f:facet>						
												<h:outputText value="#{estancia.fechainidate}" >
													<f:converter converterId="extendedDateTimeConverter" />
												    <f:attribute name="pattern" value="dd/MM/yyyy" />
												    <f:attribute name="timeZone" value="Europe/Madrid" />
												</h:outputText>
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.estancia_fechafin}" />
												</f:facet>
												<h:outputText value="#{estancia.fechafindate}" >
													<f:converter converterId="extendedDateTimeConverter" />
												    <f:attribute name="pattern" value="dd/MM/yyyy" />
												    <f:attribute name="timeZone" value="Europe/Madrid" />
												</h:outputText>
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.estancia_centrodest}" />
												</f:facet>
												<h:outputText value="#{estancia.centrodestino.length() gt 20 ? estancia.centrodestino.substring(0,17).concat('...') : estancia.centrodestino}" />
											</p:column>
																	
											<p:column style="width:40px">
																
												<p:commandLink update="dlgEstancia:estanciaData dlgEstancia:estanciaButtons"
													oncomplete="PF('estanciaDialog').show()"
													immediate="true">
													<f:setPropertyActionListener value="#{estancia}" target="#{premExtDoutController.selectedEstancia}" />											
														<h:graphicImage alt="ko" library="images" name="icons/magnifying_glass16.png" style="margin-bottom:-4px;margin-left:4px;" />						
												</p:commandLink>
													
												<p:commandLink update="panelEstanciasTable estanciasTable" immediate="true" >
													<f:setPropertyActionListener value="#{estancia}" target="#{premExtDoutController.deletedEstancia}" />											
													<h:graphicImage alt="ko" library="images" name="icons/delete16.png"	style="margin-bottom:-4px;margin-left:4px;" />						
												</p:commandLink>
						
											</p:column>			
										</p:dataTable>
									</div>
									</div>
								</h:panelGroup>						
							</h:panelGroup>	
																
							<div class="boxes-full" style="width: calc(100% - 13px);margin-left: 10px">
								<div class="box-title">
									<h2 style="font-size: 1.3em">
										<div id="wrapper" style="width: 700px">
											<div style="float:left">
												#{i18n.titleOutEstanciaDatatable}
											</div>
											<div style="float:right;font-size: 0.7em">
												<p:commandButton update="dlgOutEstancia:outEstanciaData dlgOutEstancia:outEstanciaButtons"
															oncomplete="PF('outEstanciaDialog').show()"
															value="#{i18n.anadir}" immediate="true"
															action="#{premExtDoutController.addOutEstancia}">
														</p:commandButton>
											</div>
										</div>
									</h2>
									
								</div>
								<h:panelGroup id="panelDatatableOutEstancia">		
									<div class="box-100column">
										<p:dataTable id="outEstanciasTable" var="outestancia"
											value="#{premExtDoutController.outEstancias}" emptyMessage="" rendered="#{!empty premExtDoutController.outEstancias}">
								    
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.estancia_fechaini}" />							
												</f:facet>						
												<h:outputText value="#{outestancia.fechainidate}" >
													<f:converter converterId="extendedDateTimeConverter" />
												    <f:attribute name="pattern" value="dd/MM/yyyy" />
												    <f:attribute name="timeZone" value="Europe/Madrid" />
												</h:outputText>
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.estancia_fechafin}" />
												</f:facet>
												<h:outputText value="#{outestancia.fechafindate}" >
													<f:converter converterId="extendedDateTimeConverter" />
												    <f:attribute name="pattern" value="dd/MM/yyyy" />
												    <f:attribute name="timeZone" value="Europe/Madrid" />
												</h:outputText>
											</p:column>
						
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{i18n.estancia_centrodest}" />
												</f:facet>
												<h:outputText value="#{outestancia.centrodestino.length() gt 20 ? outestancia.centrodestino.substring(0,17).concat('...') : outestancia.centrodestino}" />
											</p:column>
																	
											<p:column style="width:40px">
																
												<p:commandLink update="dlgOutEstancia:outEstanciaData dlgOutEstancia:outEstanciaButtons"
													oncomplete="PF('outEstanciaDialog').show()"
													immediate="true">
													<f:setPropertyActionListener value="#{outestancia}" target="#{premExtDoutController.selectedOutEstancia}" />											
														<h:graphicImage alt="ko" library="images" name="icons/magnifying_glass16.png" style="margin-bottom:-4px;margin-left:4px;" />						
												</p:commandLink>
													
												<p:commandLink update="panelDatatableOutEstancia outEstanciasTable" immediate="true" >
													<f:setPropertyActionListener value="#{outestancia}" target="#{premExtDoutController.deletedOutEstancia}" />											
													<h:graphicImage alt="ko" library="images" name="icons/delete16.png"	style="margin-bottom:-4px;margin-left:4px;" />						
												</p:commandLink>
						
											</p:column>			
										</p:dataTable>							
									</div>
								</h:panelGroup>
							</div>						
						</h:panelGroup>
					</div>
				</div>
				<!-- Fin datos especÃ­ficos-->
	
				<ui:include src="/base/baseAnexadoDocumentos.xhtml">
					<ui:param name="datosSolicitud" value="#{premExtDoutController}" />
				</ui:include>
	
				
	
				<p:messages showIcon="false" style="display: inline-block;" id="message">
					<p:autoUpdate />
				</p:messages>
			
				<p:commandButton action="#{premExtDoutController.sendRequest}"
					styleClass="rightformbutton"
					id="hiddenSendButton" style="display:none" 
					onclick="enableOverlay()"
					oncomplete="disbaleOverlay();sendHeight();"
					onerror="disbaleOverlay()" />

				<div id="overlay">
		           	<div id="gifprocesando"/>
					<div id="opacidadfondo"/>				
				</div>
				
				 <p:commandButton  widgetVar="send" id="send" styleClass="rightformbutton"
		        	value="#{i18n.sendForm}">
		            <p:confirm header="ConfirmaciÃ³n"  icon="ui-icon-alert"/>
		        </p:commandButton>
		        
		        <p:confirmDialog id="confirm" widgetVar="confirmdoc" global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350" style="width:50%;min-width:600;max-width:800;" message="#{premExtDoutController.signActive ? i18n.confirm_registry_input_sign : i18n.confirm_registry_input_send}">
			        <ui:fragment rendered="#{premExtDoutController.signActive}">
			       		<p:commandButton value="#{i18n.cancelar}" type="button" styleClass="ui-confirmdialog-no" style="float:right" icon="ui-icon-close"/>
						<p:commandButton value="#{i18n.sign}" type="button"
							styleClass="ui-confirmdialog-no" style="float:right"
							icon="ui-icon-close" id="signDocuments" 
							onclick="PF('confirmdoc').hide();refreshFilesSize();signDocuments();enableOverlay();validateFieldsColor()" oncomplete="disbaleOverlay()">
						</p:commandButton>
					</ui:fragment>
					<ui:fragment rendered="#{not premExtDoutController.signActive}">
			            <p:commandButton value="#{i18n.no}" type="button" styleClass="ui-confirmdialog-no" style="float:right" icon="ui-icon-close"/>
						<p:commandButton value="#{i18n.yes}" style="float:right" icon="ui-icon-check" widgetVar="yes" id="yes"
							onclick="PF('confirmdoc').hide();$('#hiddenSendButton').click();validateFieldsColor()" />
			        </ui:fragment>
		        </p:confirmDialog>
		        <p:dialog header="#{i18n.signaturedetails}"
						widgetVar="dialogError" modal="true" width="600px" height="350px"
						style="width:50%;min-width:600;max-width:800;">
						<div
							style="width: 100%; height: 100%; display: flex; flex-direction: column;">
							<p style="margin-top: 1.5em;">#{i18n.signature_error}</p>
							<p id="textSignError"
								style="margin-top: 1.5em; color: #ff0000; font-weight: bold;"
								lang="ch"></p>
							<p>#{i18n.signature_error_desc}:</p>
							<ul>
								<li>1. #{i18n.signature_must_install_autofirma} <a
									target="_blank"
									href="https://firmaelectronica.gob.es/Home/Descargas.html">#{i18n.more_info}.</a></li>
								<li>2. #{i18n.signature_must_install_certificate} <a
									target="_blank"
									href="https://www.sede.fnmt.gob.es/certificados/persona-fisica">#{i18n.more_info}.</a></li>
								<li>3. #{i18n.signature_multiple_certificates} </li>
								<li>4. #{i18n.signature_must_allow_certificate} </li>
								<li>5.
									#{i18n.signature_certificate_not_expired_or_revoked} <a
									target="_blank"
									href="https://valide.redsara.es/valide/validarCertificado/ejecutar.html">#{i18n.signature_must_request_verification}</a>
								</li>
							</ul>
							<br />
							<div class="ceb-flex-container"
								style="flex-grow: 1; align-items: flex-end;">

								<div class="ceb-item">

									<h:form>

										<p:commandButton value="#{i18n.close}" type="button"
											style="float:right" styleClass="ui-confirmdialog-no"
											icon="ui-icon-close" id="closeButton"
											onclick="PF('dialogError').hide()" />

									</h:form>

								</div>
							</div>
						</div>
				</p:dialog>
					
			</h:panelGroup>
		</h:form>
		
		<h:form id="filesB64" >
			<p:inputText type="hidden" id="filesBase64" value="#{premExtDoutController.filesBase64}" />
			<p:inputText type="hidden" id="uploadedFilesSize" value="#{premExtDoutController.uploadedFilesSize}" />
			<p:remoteCommand name="refreshFilesSize" update="uploadedFilesSize" />
			<p:remoteCommand name="updateFilesBase64" action="#{premExtDoutController.updateFilesBase64}" />
		</h:form>

		<p:dialog header="#{i18n.titleContribucionDialog}" widgetVar="contribucionDialog" resizable="true" modal="true" >

			<h:form id="dlgContrib">

				<h:panelGrid id="contribData" >

					<p:outputLabel class="box-texttitle" for="tituloDisplay" value="#{i18n.contrib_titulo}">: </p:outputLabel>
					<p:inputText id="tituloDisplay"	value="#{premExtDoutController.selectedContribucion.titulo}" size="105" required="true" maxlength="512"/>
				
					<p:outputLabel class="box-texttitle" for="publicacionDisplay" value="#{i18n.contrib_publicacion}">: </p:outputLabel>
					<p:inputText id="publicacionDisplay" value="#{premExtDoutController.selectedContribucion.publicacion}" size="105" maxlength="512"/>

					<p:outputLabel class="box-texttitle" for="descricionDisplay" value="#{i18n.contrib_descricion}">: </p:outputLabel>
					<p:inputTextarea id="descricionDisplay" rows="7" cols="102" value="#{premExtDoutController.selectedContribucion.descricion}" autoResize="false"/>

					<p:outputLabel class="box-texttitle" for="coautoresDisplay" value="#{i18n.contrib_coautores}">: </p:outputLabel>
					<p:inputTextarea id="coautoresDisplay" rows="5" cols="102" value="#{premExtDoutController.selectedContribucion.coautores}" autoResize="false"/>

					<p:messages id="contribMessages" showIcon="false" />
				
				</h:panelGrid>

				<h:panelGrid id="contribButtons" >
								
					<p:commandButton id="buttonNuevo" value="#{i18n.buttonSaveDialog}"
						actionListener="#{premExtDoutController.newContrib}"
						update="panelDatatableContrib :contribucionsTable contribData"
						rendered="#{empty premExtDoutController.selectedContribucion.titulo}" />
					
					<p:commandButton id="buttonSave" value="#{i18n.buttonSaveDialog}"
						actionListener="#{premExtDoutController.saveContrib}"
						update="panelDatatableContrib :contribucionsTable contribData"
						rendered="#{!empty premExtDoutController.selectedContribucion.titulo}" />										
						
				</h:panelGrid>
				
			</h:form>
		</p:dialog>
		
		<p:dialog header="#{i18n.titleEstanciaDialog}" widgetVar="estanciaDialog" resizable="true" modal="true" >

			<h:form id="dlgEstancia">

				<h:panelGrid id="estanciaData" >

					<p:outputLabel class="box-texttitle" for="fechainiDisplay" value="#{i18n.estancia_fechaini}">: </p:outputLabel>
					<p:calendar type="text"
										value="#{premExtDoutController.selectedEstancia.fechainidate}"
										id="fechainiDisplay" required="true" locale="es"
										pattern="dd/MM/yyyy" style="min-width:467px" />
				
					<p:outputLabel class="box-texttitle" for="fechafinDisplay" value="#{i18n.estancia_fechafin}">: </p:outputLabel>
					<p:calendar type="text"
										value="#{premExtDoutController.selectedEstancia.fechafindate}"
										id="fechafinDisplay" required="true" locale="es"
										pattern="dd/MM/yyyy" style="min-width:467px" />

					<p:outputLabel class="box-texttitle" for="centrodestinoDisplay" value="#{i18n.estancia_centrodest}">: </p:outputLabel>
					<p:inputText id="centrodestinoDisplay" value="#{premExtDoutController.selectedEstancia.centrodestino}" size="100" required="true" maxlength="512"/>

					<p:messages id="estanciaMessages" showIcon="false" />
				
				</h:panelGrid>

				<h:panelGrid id="estanciaButtons" >
								
					<p:commandButton value="#{i18n.buttonSaveDialog}"
						actionListener="#{premExtDoutController.newEstancia}"
						update="panelEstanciasTable :estanciasTable estanciaData"
						rendered="#{empty premExtDoutController.selectedEstancia.centrodestino}" />
					
					<p:commandButton value="#{i18n.buttonSaveDialog}"
						actionListener="#{premExtDoutController.saveEstancia}"
						update="panelEstanciasTable :estanciasTable estanciaData"
						rendered="#{!empty premExtDoutController.selectedEstancia.centrodestino}" />										
						
				</h:panelGrid>
				
			</h:form>
		</p:dialog>
		
		<p:dialog header="#{i18n.titleOutEstanciaDialog}" widgetVar="outEstanciaDialog" resizable="true" modal="true" >

			<h:form id="dlgOutEstancia">

				<h:panelGrid id="outEstanciaData" >

					<p:outputLabel class="box-texttitle" for="fechainioutDisplay" value="#{i18n.estancia_fechaini}">: </p:outputLabel>
					<p:calendar type="text"
										value="#{premExtDoutController.selectedOutEstancia.fechainidate}"
										id="fechainioutDisplay" required="true" locale="es"
										pattern="dd/MM/yyyy" style="min-width:467px" />
				
					<p:outputLabel class="box-texttitle" for="fechafinoutDisplay" value="#{i18n.estancia_fechafin}">: </p:outputLabel>
					<p:calendar type="text"
										value="#{premExtDoutController.selectedOutEstancia.fechafindate}"
										id="fechafinoutDisplay" required="true" locale="es"
										pattern="dd/MM/yyyy" style="min-width:467px" />

					<p:outputLabel class="box-texttitle" for="centrodestinooutDisplay" value="#{i18n.estancia_centrodest}">: </p:outputLabel>
					<p:inputText id="centrodestinooutDisplay" value="#{premExtDoutController.selectedOutEstancia.centrodestino}" size="100" required="true" maxlength="512"/>

					<p:messages id="outEstanciaMessages" showIcon="false" />
				
				</h:panelGrid>

				<h:panelGrid id="outEstanciaButtons" >
								
					<p:commandButton value="#{i18n.buttonSaveDialog}"
						actionListener="#{premExtDoutController.newOutEstancia}"
						update="panelDatatableOutEstancia :outEstanciasTable outEstanciaData"
						rendered="#{empty premExtDoutController.selectedOutEstancia.centrodestino}" />
					
					<p:commandButton value="#{i18n.buttonSaveDialog}"
						actionListener="#{premExtDoutController.saveOutEstancia}"
						update="panelDatatableOutEstancia :outEstanciasTable outEstanciaData"
						rendered="#{!empty premExtDoutController.selectedOutEstancia.centrodestino}" />										
						
				</h:panelGrid>
				
			</h:form>
		</p:dialog>
		
		</ui:define>

		<!-- Envio de la informaciÃ³n de sesiÃ³n al bean. Esta parte es obligatoria para todos los formularios -->
		<ui:define name="receiveparameters" >
			<h:form id="parameters" prependId="false">
				<h:inputHidden id="received-message" value="#{premExtDoutController.receivedParametersInJSON}" />
				<h:commandButton action="#{premExtDoutController.receiveParentData}" id="sendParametersToBeanButton" style="display: none;" >
					<f:ajax execute="@form" render="NewRegistryForm" />
				</h:commandButton>
			</h:form>
			<script type="text/javascript" src="#{request.contextPath}/resources/js/custom-forms-params.js"> </script>
			<script type="text/javascript" src="#{request.contextPath}/resources/js/afirma/miniapplet.js"> </script>
			<script type="text/javascript" src="#{request.contextPath}/resources/js/afirma/cividasfirma.js"> </script>
		</ui:define>
	</ui:composition>
</html>
